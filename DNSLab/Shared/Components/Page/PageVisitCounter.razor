@inject IStaticsRepository _StaticsRepository
@inject NavigationManager _NavigationManager

<BitLabel>
    تعداد بازدید : 
    @if (visitCount > -1)
    {
        <strong>@(visitCount.ToString().EnglishToPersianNumbers() + " بار")</strong>
    }
    else
    {
        <BitSpinner Size="BitSpinnerSize.Small" Class="d-inline-block"/>
    }
</BitLabel>

@code {
    int visitCount = -1;
    protected override async Task OnInitializedAsync()
    {
        visitCount = await _StaticsRepository.PageVisitCount(new Uri(_NavigationManager.Uri).LocalPath);
        await this.InvokeAsync(() => StateHasChanged());
    }
}
