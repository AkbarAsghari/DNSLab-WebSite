@using DNSLab.DTOs.IP
@using DNSLab.Interfaces.Repository
@inherits LayoutComponentBase
@inject IIPRepository ipRepository
@inject IStringLocalizer<Resource> localizer

<PageTitle>DNSLab</PageTitle>

<div class="page" style="direction:@localizer["Direction"];font-family:@localizer["FontFamily"]">
    <Toast />
    <CascadingAuthenticationState>
        <AuthorizeView>
            <Authorized>
                <CascadingValue Value="@IPDTO">

                    <div class="sidebar">
                        <NavMenu />
                    </div>
                    <main>
                        <article class="content px-4">
                            @Body
                        </article>
                    </main>
                </CascadingValue>
            </Authorized>
            <NotAuthorized>
                @Body
            </NotAuthorized>
        </AuthorizeView>
    </CascadingAuthenticationState>
</div>

@code {
    private IPDTO IPDTO = new IPDTO();

    protected override async Task OnInitializedAsync()
    {
        IPDTO = await ipRepository.GetIP();
    }
}
