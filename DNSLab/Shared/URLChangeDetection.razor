@using System.ComponentModel
@inject NavigationManager _NavigationManager
@inject IStaticsRepository _IStaticsRepository
@implements IDisposable


@code {
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        await _IStaticsRepository.PageVisit(_NavigationManager.Uri);

        if (firstRender)
            _NavigationManager.LocationChanged += _navigationManager_LocationChanged;
    }

    private async void _navigationManager_LocationChanged(object? sender, LocationChangedEventArgs e)
    {
        await _IStaticsRepository.PageVisit(_NavigationManager.Uri);
    }

    public void Dispose()
    {
        _NavigationManager.LocationChanged -= _navigationManager_LocationChanged;
    }
}