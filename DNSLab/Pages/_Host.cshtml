@page "/"
@namespace DNSLab.Pages
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@using System.Globalization
@using DNSLab.Shared
@using Microsoft.AspNetCore.Localization

@{
    Layout = "_Layout";
    this.HttpContext.Response.Cookies.Append(
        CookieRequestCultureProvider.DefaultCookieName,
        CookieRequestCultureProvider.MakeCookieValue(
            new RequestCulture(
                CultureInfo.CurrentCulture,
                CultureInfo.CurrentUICulture)));
}

@{
    RenderMode renderMode = RenderMode.Server;
    Type authType = typeof(App);

    if (Request.ShouldRenderAsWithoutAdminMenu())
    {
        authType = typeof(AppNoAuth);
    }

    if (Request.ShouldRenderStaticMode())
    {
        renderMode = RenderMode.Static;
    }
    else
    {
        renderMode = RenderMode.Server;
    }

    <component type="@authType" render-mode="@renderMode" />
}
