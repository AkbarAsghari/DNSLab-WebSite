@inject ICommentRepository commentRepository
@inject IStringLocalizer<Resource> localizer

<div class="row">
    @if (allComments == null)
    {
        <Loading />
    }
    else if (allComments.Count() == 0)
    {
        <text>@localizer["ThereIsNoComment"]</text>
    }
    else
    {
        @foreach (var comment in allComments)
        {
            <CommentItem CommentText="@comment.Text" UserId="@comment.UserId" FullName="@comment.FullName" CommentDate="@comment.CreateDate" />
        }
    }
</div>

@code {
    IEnumerable<FullCommentDTO> allComments;
    private bool isLoading = false;


    protected override async Task OnInitializedAsync()
    {
        await LoadComments();
    }

    private async Task LoadComments()
    {
        isLoading = true;
        allComments = (await commentRepository.GetAllComments());
        isLoading = false;
    }
}
