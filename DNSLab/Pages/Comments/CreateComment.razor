@page "/Comment/Create"
@inject ICommentRepository commentRepository
@inject NavigationManager _navManager
@inject ToastService toastService
@inject IStringLocalizer<Resource> localizer

@attribute [Authorize]

<CommentForm comment="createComment" OnValidSubmit="Create" Title="@localizer["CreateNewComment"]"></CommentForm>

@code {
    private CommentDTO createComment = new CommentDTO { Text = String.Empty };

    public async Task Create()
    {
        if (await commentRepository.AddNewComment(createComment))
        {
            _navManager.NavigateTo("Comment/MyComments");
            toastService.ShowToast(localizer["CommentSubmited"], Enums.ToastLevel.Success);
        }
    }
}
