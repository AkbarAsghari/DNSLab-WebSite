@page "/SiteChange/Create"
@inject IStaticsRepository staticRepository
@inject NavigationManager _navManager
@inject ToastService toastService
@inject IStringLocalizer<Resource> localizer

@attribute [Authorize(Roles = "Admin")]

<SiteChangeForm SiteChange="SiteChange" OnValidSubmit="Create" Title="@localizer["CreateNewSiteChange"]"></SiteChangeForm>

@code {
    private SiteChangesDTO SiteChange = new SiteChangesDTO { Title = String.Empty };

    public async Task Create()
    {
        if (await staticRepository.AddSiteChange(SiteChange))
        {
            _navManager.NavigateTo("SiteChange/All");
            toastService.ShowToast(localizer["NewSiteChangeAdded"], Enums.ToastLevel.Success);
        }
    }
}
