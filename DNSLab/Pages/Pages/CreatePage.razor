@page "/Page/Create"
@inject IPageRepository _PageRepository
@inject NavigationManager _navManager
@inject ToastService toastService

<PageGeneratorForm page=page TagsInput=Tags OnValidSubmit=Create Title="ایجاد صفحه جدید"></PageGeneratorForm>
@code {
    private TagsInput Tags;

    private PageDTO page { get; set; } = new PageDTO
        {
            URL = String.Empty,
            Title = String.Empty,
            Description = String.Empty,
            Body = String.Empty,
        };

    public async Task Create()
    {
        page.Keywords = Tags.Tags.ToArray();

        if (await _PageRepository.AddNewPage(page))
        {
            _navManager.NavigateTo("Page/MyPages");
            toastService.ShowToast("PageCreated", Enums.ToastLevel.Success);
        }
    }
}
