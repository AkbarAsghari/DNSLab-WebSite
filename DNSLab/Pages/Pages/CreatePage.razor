@page "/Page/Create"
@inject IPageRepository _PageRepository
@inject NavigationManager _navManager
@inject ToastService toastService
@inject IStringLocalizer<Resource> localizer

@attribute [Authorize(Roles = "Admin,Writer")]

<PageGeneratorForm Page=page OnValidSubmit=Create Title="ایجاد صفحه جدید"></PageGeneratorForm>
@code {
    private List<string> Tags;

    private PageDTO page { get; set; } = new PageDTO
        {
            URL = String.Empty,
            Title = String.Empty,
            Description = String.Empty,
            Keywords = new List<string>(),
            Body = "مطلب خود را در اینجا بنویسید.",
        };

    public async Task Create()
    {
        if (await _PageRepository.AddNewPage(page))
        {
            _navManager.NavigateTo("Page/MyPages");
            toastService.ShowToast(localizer["PageCreated"], Enums.ToastLevel.Success);
        }
    }
}
